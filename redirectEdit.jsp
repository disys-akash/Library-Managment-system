<%@page import="java.sql.*"%>
<%@page import="java.util.*"%>
<%@page import="java.io.*"%>
<style>
div {
  height: 1000px;
  width: 100%;
  background-color: #eac8ea;
}
a.button {
  background-color:#eac8ea ; 
  border: 2px solid #eac8ea ;
  border-radius: 50px; 
  padding: 10px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 20px;
  margin:4px 2px;
  cursor: pointer;
  transition-duration: 0.4s;
  
}

a.button:hover {
  background-color:white;
  color: black;
  border: 11px solid #eac8ea;
}
button {
  background-color:#eac8ea ; 
  border: 2px solid #eac8ea ;
  border-radius: 25px; 
  padding: 10px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 20px;
  margin:4px 2px;
  cursor: pointer;
  transition-duration: 0.4s;
  
}

button:hover {
  background-color:white;
  color: black;
  border: 11px solid white;
}
</style>  

<%
String driverName = "com.mysql.cj.jdbc.Driver";
String connectionUrl = "jdbc:mysql://localhost:3306/";
String dbName = "library";
String userId = "root";
String password = "Welcome123#";
Class.forName(driverName);
Connection con = null;
Statement s = null;
ResultSet resultSet = null;
%>
<div>
<a class="button button5"; href="http://localhost:8080/webaplication/index.jsp">Home</a>
<h2 align="center"><font><strong> Enter the book ID to edit</strong></font></h2>
	<form align="center"  method="post">
		BOOK ID: <input type="text" name="BOOK_NAME"> &nbsp
		<input type="submit" value="Search"/>
	</form> 	
	<%
	
	%>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 
<%
  con =DriverManager.getConnection(connectionUrl+dbName, userId, password);
   s = con.createStatement();
  String n=request.getParameter("BOOK_NAME");
   String q = "select * from Books_Details WHERE Book_Id ="+n; 
   resultSet = s.executeQuery(q);
while(resultSet.next()){
	%>		<form align="center"  method="post">
			Book_Id: <br> <input type="text" value="<%= resultSet.getString("Book_Id")%>" name="Book_Id" readonly> &nbsp<br>
			 Name: <br> <input type="text" value="<%= resultSet.getString("Book_Name")%>" name="B_name" required> &nbsp<br>
			 Author<br><input type="text" value="<%= resultSet.getString("Author")%>" name="Author" required>&nbsp<br>
			 Price: <br><input type="text" value="<%= resultSet.getString("Price")%>" name="Price" required> &nbsp<br>
		 	copies: <br><input type="text" value="<%= resultSet.getString("copies")%>" name="copies" required> &nbsp<br>
		 	<input type = "submit" value="Update"  name="Update" ><br>    
		</form>  
			
<%
}
%> 
<%
	if(request.getParameter("Update")!=null){
	String ID=request.getParameter("Book_Id");
	String Name=request.getParameter("B_name");
	String  Author=request.getParameter("Author");
	String Price=request.getParameter("Price");
	String copies=request.getParameter("copies");	
	String query = "UPDATE books_details SET Book_Name='"+Name+"',Author='"+Author+"',Price='"+Price+"',copies='"+copies+"' WHERE Book_ID="+ID;
    Class.forName("com.mysql.cj.jdbc.Driver");
	Connection conn = DriverManager.getConnection("jdbc:mysql://localhost:3306/library","root","Welcome123#");
	if(con!= null){System.out.println("connected Succesfully");}
	Statement statement = con.createStatement();
	int exe = statement.executeUpdate(query);
%>       <script>  
            alert("Record Updated");          
       </script>
       <form align="center" action = "viewBookDetais.jsp"  method="post">
       <button class ="button"  name="Update" > Click Here To View </button><br> 
       </form>
       <%} %>
</div>                     